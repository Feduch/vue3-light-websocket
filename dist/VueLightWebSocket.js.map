{"version":3,"file":"VueLightWebSocket.js","sources":["../src/WebSocketClient.js","../src/Main.js"],"sourcesContent":["export default class WebSocketClient {\n  constructor (url, options) {\n    this.instance = null\n    this.isConnected = false\n    this.url = url\n    this.options = options || this.defaultOptions()\n    if (this.options) {\n      this.reconnectEnabled = options.reconnectEnabled || false\n      if (this.reconnectEnabled) {\n        this.reconnectInterval = options.reconnectInterval\n      }\n    }\n    // These methods should be defined by components\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n\n  defaultOptions () {\n    return {\n      reconnectEnabled: false,\n      reconnectInterval: 0\n    }\n  }\n\n  connect () {\n    this.instance = new WebSocket(this.url)\n\n    // Socket event listeners\n    // Each event handler also calls the corresponding class method, which can be defined by the component\n    this.instance.onopen = () => {\n      this.isConnected = true\n      if (typeof this.onOpen === 'function') {\n        this.onOpen()\n      }\n    }\n    this.instance.onmessage = (msg) => {\n      if (typeof this.onMessage === 'function') {\n        this.onMessage(msg)\n      }\n    }\n    this.instance.onclose = (evt) => {\n      this.isConnected = false\n      if (typeof this.onClose === 'function') {\n        this.onClose(evt)\n      }\n      if (this.reconnectEnabled) {\n        this.reconnect()\n      }\n    }\n    this.instance.onerror = (evt) => {\n      if (typeof this.onError === 'function') {\n        this.onError(evt)\n      }\n    }\n  }\n\n  disconnect () {\n    this.instance.close()\n    delete this.instance\n  }\n\n  reconnect () {\n    this.instance.close()\n    delete this.instance\n    setTimeout(() => {\n      this.connect()\n    }, this.reconnectInterval)\n  }\n\n  sendObj (data) {\n    this.instance.send(JSON.stringify(data))\n  }\n\n  removeListeners () {\n    this.onOpen = null\n    this.onMessage = null\n    this.onClose = null\n    this.onError = null\n  }\n}\n","import WebSocketClient from './WebSocketClient'\n\nexport default {\n\n  install (Vue, connection, options = {}) {\n    const socketClient = new WebSocketClient(connection, options)\n    if (!options.connectManually) {\n      socketClient.connect()\n    }\n    Vue.prototype.$socketClient = socketClient\n  }\n\n}\n"],"names":["WebSocketClient","url","options","instance","isConnected","defaultOptions","reconnectEnabled","reconnectInterval","onOpen","onMessage","onClose","onError","WebSocket","onopen","a","onmessage","msg","onclose","evt","reconnect","onerror","close","setTimeout","connect","data","send","JSON","stringify","install","Vue","connection","socketClient","connectManually","prototype","$socketClient"],"mappings":"kZAAqBA,CAAAA,wCACnB,UAAA,CAAaC,CAAb,CAAkBC,CAAlB,CAA2B,yBACzB,KAAKC,QAAL,CAAgB,KAChB,KAAKC,WAAL,IACA,KAAKH,GAAL,CAAWA,EACX,KAAKC,OAAL,CAAeA,CAAO,EAAI,KAAKG,cAAL,GACtB,KAAKH,OAAL,GACF,KAAKI,gBAAL,CAAwBJ,CAAO,CAACI,gBAARJ,IAAxB,CACI,KAAKI,gBAAL,GACF,KAAKC,iBAAL,CAAyBL,CAAO,CAACK,iBAD/B,CAFF,EAOJ,KAAKC,MAAL,CAAc,KACd,KAAKC,SAAL,CAAiB,KACjB,KAAKC,OAAL,CAAe,KACf,KAAKC,OAAL,CAAe,kEAGC,CAChB,MAAO,CACLL,gBAAgB,GADX,CAELC,iBAAiB,CAAE,CAFd,mCAME,YACT,KAAKJ,QAAL,CAAgB,GAAIS,CAAAA,SAAJ,CAAc,KAAKX,GAAnB,CAAhB,CAIA,KAAKE,QAAL,CAAcU,MAAd,CAAuB,UAAM,CAC3BC,CAAI,CAACV,WAAL,GAAA,CAC2B,kBAAhBU,CAAAA,CAAI,CAACN,MAAW,EACzBM,CAAI,CAACN,MAAL,EARK,CACT,CAUA,KAAKL,QAAL,CAAcY,SAAd,CAA0B,SAACC,CAAD,CAAS,CACH,kBAAnBF,CAAAA,CAAI,CAACL,SAAc,EAC5BK,CAAI,CAACL,SAAL,CAAeO,CAAf,CAbK,CACT,CAeA,KAAKb,QAAL,CAAcc,OAAd,CAAwB,SAACC,CAAD,CAAS,CAC/BJ,CAAI,CAACV,WAAL,GAAA,CAC4B,kBAAjBU,CAAAA,CAAI,CAACJ,OAAY,EAC1BI,CAAI,CAACJ,OAAL,CAAaQ,CAAb,CAFF,CAIIJ,CAAI,CAACR,gBAAL,EACFQ,CAAI,CAACK,SAAL,EAtBK,CACT,CAwBA,KAAKhB,QAAL,CAAciB,OAAd,CAAwB,SAACF,CAAD,CAAS,CACH,kBAAjBJ,CAAAA,CAAI,CAACH,OAAY,EAC1BG,CAAI,CAACH,OAAL,CAAaO,CAAb,uCAKQ,CACZ,KAAKf,QAAL,CAAckB,KAAd,GACA,YAAYlB,4CAGD,YACX,KAAKA,QAAL,CAAckB,KAAd,GACA,YAAYlB,QADZ,CAEAmB,UAAU,CAAC,UAAM,CACfR,CAAI,CAACS,OAAL,EADQ,CAAA,CAEP,KAAKhB,iBAFE,kCAKHiB,EAAM,CACb,KAAKrB,QAAL,CAAcsB,IAAd,CAAmBC,IAAI,CAACC,SAALD,CAAeF,CAAfE,CAAnB,2CAGiB,CACjB,KAAKlB,MAAL,CAAc,IAAd,CACA,KAAKC,SAAL,CAAiB,IADjB,CAEA,KAAKC,OAAL,CAAe,IAFf,CAGA,KAAKC,OAAL,CAAe,mBC7EJ,CAEbiB,OAFa,UAEJC,EAAKC,EAA0B,IAAd5B,CAAAA,CAAc,wDAAJ,GAC5B6B,CAAY,CAAG,GAAI/B,CAAAA,eAAJ,CAAoB8B,CAApB,CAAgC5B,CAAhC,EAChBA,CAAO,CAAC8B,eAAR9B,EACH6B,CAAY,CAACR,OAAbQ,EADG7B,CAGL2B,CAAG,CAACI,SAAJJ,CAAcK,aAAdL,CAA8BE,CAPnB,CAAA"}